"use strict";(()=>{var N=Object.create;var l=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var Y=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty;var T=(r,t)=>()=>(r&&(t=r(r=0)),t);var M=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var V=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of X(t))!W.call(r,a)&&a!==e&&l(r,a,{get:()=>t[a],enumerable:!(o=G(t,a))||o.enumerable});return r};var O=(r,t,e)=>(e=r!=null?N(Y(r)):{},V(t||!r||!r.__esModule?l(e,"default",{value:r,enumerable:!0}):e,r));var b=(r,t,e)=>new Promise((o,a)=>{var i=c=>{try{n(e.next(c))}catch(u){a(u)}},R=c=>{try{n(e.throw(c))}catch(u){a(u)}},n=c=>c.done?o(c.value):Promise.resolve(c.value).then(i,R);n((e=e.apply(r,t)).next())});var f,F,v,U=T(()=>{"use strict";f=(r,t,e)=>{let o=r.createShader(t);if(!o)throw new Error("createShader failed");if(r.shaderSource(o,e),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS))throw new Error(`could not compile shader: ${r.getShaderInfoLog(o)||""}`);return o},F=(r,t,e)=>{let o=r.createProgram();if(!o)throw new Error("createProgram failed");if(r.attachShader(o,t),r.attachShader(o,e),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw new Error(`program failed to link:${r.getProgramInfoLog(o)||""}`);return o},v=r=>{let t=r.clientWidth,e=r.clientHeight,o=r.width!==t||r.height!==e;return o&&(r.width=t,r.height=e),o}});var L,B=T(()=>{L=`#version 300 es
precision highp float;uniform sampler2D u_image1;uniform sampler2D u_image2;uniform float u_time;in vec2 v_texCoord;out vec4 outColor;vec3 getCol1(vec2 uv){vec3 col=texture(u_image1,uv).rgb;float t=u_time*10.;float offsetFactor=t+v_texCoord.x*10.;bool isHair=!((abs(col.r-col.g)<.25)&&(abs(col.g-col.b)<.25));if(isHair){col.r=texture(u_image1,v_texCoord+vec2(sin(offsetFactor)*.01,0.)).r;col.g=texture(u_image1,v_texCoord-vec2(cos(offsetFactor)*.01,0.)).g;}return col;}vec3 getCol2(vec2 uv){vec3 col=texture(u_image2,uv).rgb;float t=u_time*5.;float offsetFactor=t+v_texCoord.y*20.;col.r=texture(u_image2,v_texCoord+vec2(sin(offsetFactor)*.01,0.)).r;col.g=texture(u_image2,v_texCoord-vec2(cos(offsetFactor)*.01,0.)).g;return col;}void main(){float s=sin(u_time)*.6+.5;float f=smoothstep(-.1+s,.1+s,v_texCoord.x);vec2 uv=v_texCoord;vec3 col1=getCol1(uv);vec3 col2=getCol2(uv);vec3 col=mix(col1,col2,f);outColor=vec4(col,1.);}`});var D,S=T(()=>{D=`#version 300 es
in vec4 a_position;in vec2 a_texCoord;uniform vec2 u_resolution;out vec2 v_texCoord;void main(){vec4 pos=a_position;pos.x*=u_resolution.y/u_resolution.x;gl_Position=pos;v_texCoord=a_texCoord;}`});var g=M(h=>{"use strict";U();B();S();var C=r=>new Promise(t=>{let e=new Image;e.src=r,e.onload=()=>{t(e)}});b(h,null,function*(){let r=yield Promise.all([C("../assets/img/Di-3d.png"),C("../assets/img/leaves.jpg")]),t=document.querySelector("#canvas");if(!t)throw new Error("no canvas");let e=t.getContext("webgl2");if(!e)throw new Error("no gl context");let o=f(e,e.VERTEX_SHADER,D),a=f(e,e.FRAGMENT_SHADER,L),i=F(e,o,a),R=e.getAttribLocation(i,"a_position"),n=e.getAttribLocation(i,"a_texCoord"),c=e.getUniformLocation(i,"u_image1"),u=e.getUniformLocation(i,"u_image2"),p=e.getUniformLocation(i,"u_time"),w=e.getUniformLocation(i,"u_resolution"),_=(s,E)=>{let A=e.createTexture();return e.activeTexture(e.TEXTURE0+s),e.bindTexture(e.TEXTURE_2D,A),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,E),A},y=_(0,r[0]),P=_(1,r[1]),d=e.createVertexArray();e.bindVertexArray(d);{let s=new Float32Array([-.5,-.5,.5,-.5,.5,.5,-.5,.5]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),e.enableVertexAttribArray(R),e.vertexAttribPointer(R,2,e.FLOAT,!1,0,0);let E=new Float32Array([0,1,1,1,1,0,0,0]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,E,e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);let A=new Uint16Array([0,1,3,3,1,2]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(A),e.STATIC_DRAW),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}let m=e.createVertexArray();e.bindVertexArray(m);{let s=new Float32Array([-.9,-.7,-.7,-.9,-.5,-.7,-.7,-.5]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),e.enableVertexAttribArray(R),e.vertexAttribPointer(R,2,e.FLOAT,!1,0,0);let E=new Float32Array([0,1,1,1,1,0,0,0]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,E,e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);let A=new Uint16Array([0,1,2,2,3,0]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(A),e.STATIC_DRAW),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}let x=e.createVertexArray();e.bindVertexArray(x);{let s=new Float32Array([.5,.8,.6,.6,.7,.8,.8,.6,.9,.8,1,.6]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),e.enableVertexAttribArray(R),e.vertexAttribPointer(R,2,e.FLOAT,!1,0,0);let E=new Float32Array([0,0,1,0,1,1,1,0,0,1]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,E,e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);let A=new Uint16Array([0,2,1,3,4,5]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(A),e.STATIC_DRAW),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}let I=+new Date;(function s(){let E=(+new Date-I)/1e3;v(e.canvas)&&e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(i),e.uniform1i(c,0),e.uniform1i(u,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,y),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,P),e.uniform1f(p,E),e.uniform2fv(w,[e.canvas.width,e.canvas.height]),e.bindVertexArray(d),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindVertexArray(m),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindVertexArray(x),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindVertexArray(null),requestAnimationFrame(s)})()})});var re=O(g());})();
