var A=(r,o,e)=>{let t=r.createShader(o);if(!t)throw new Error("createShader failed");if(r.shaderSource(t,e),r.compileShader(t),!r.getShaderParameter(t,r.COMPILE_STATUS))throw new Error(`could not compile shader: ${r.getShaderInfoLog(t)||""}`);return t},_=(r,o,e)=>{let t=r.createProgram();if(!t)throw new Error("createProgram failed");if(r.attachShader(t,o),r.attachShader(t,e),r.linkProgram(t),!r.getProgramParameter(t,r.LINK_STATUS))throw new Error(`program failed to link:${r.getProgramInfoLog(t)||""}`);return t};var d=r=>{let o=r.clientWidth,e=r.clientHeight,t=r.width!==o||r.height!==e;return t&&(r.width=o,r.height=e),t};var m=`#version 300 es
precision highp float;uniform sampler2D u_image1;uniform sampler2D u_image2;uniform float u_time;in vec2 v_texCoord;out vec4 outColor;vec3 getCol1(vec2 uv){vec3 col=texture(u_image1,uv).rgb;float t=u_time*10.;float offsetFactor=t+v_texCoord.x*10.;bool isHair=!((abs(col.r-col.g)<.25)&&(abs(col.g-col.b)<.25));if(isHair){col.r=texture(u_image1,v_texCoord+vec2(sin(offsetFactor)*.01,0.)).r;col.g=texture(u_image1,v_texCoord-vec2(cos(offsetFactor)*.01,0.)).g;}return col;}vec3 getCol2(vec2 uv){vec3 col=texture(u_image2,uv).rgb;float t=u_time*5.;float offsetFactor=t+v_texCoord.y*20.;col.r=texture(u_image2,v_texCoord+vec2(sin(offsetFactor)*.01,0.)).r;col.g=texture(u_image2,v_texCoord-vec2(cos(offsetFactor)*.01,0.)).g;return col;}void main(){float s=sin(u_time)*.6+.5;float f=smoothstep(-.1+s,.1+s,v_texCoord.x);vec2 uv=v_texCoord;vec3 col1=getCol1(uv);vec3 col2=getCol2(uv);vec3 col=mix(col1,col2,f);outColor=vec4(col,1.);}`;var x=`#version 300 es
in vec4 a_position;in vec2 a_texCoord;uniform vec2 u_resolution;out vec2 v_texCoord;void main(){vec4 pos=a_position;pos.x*=u_resolution.y/u_resolution.x;gl_Position=pos;v_texCoord=a_texCoord;}`;var l=r=>new Promise(o=>{let e=new Image;e.src=r,e.onload=()=>{o(e)}});(async()=>{let r=await Promise.all([l("../assets/img/Di-3d.png"),l("../assets/img/leaves.jpg")]),o=document.querySelector("#canvas");if(!o)throw new Error("no canvas");let e=o.getContext("webgl2");if(!e)throw new Error("no gl context");let t=A(e,e.VERTEX_SHADER,x),b=A(e,e.FRAGMENT_SHADER,m),c=_(e,t,b),s=e.getAttribLocation(c,"a_position"),E=e.getAttribLocation(c,"a_texCoord"),F=e.getUniformLocation(c,"u_image1"),v=e.getUniformLocation(c,"u_image2"),U=e.getUniformLocation(c,"u_time"),B=e.getUniformLocation(c,"u_resolution"),R=(a,n)=>{let i=e.createTexture();return e.activeTexture(e.TEXTURE0+a),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),i},L=R(0,r[0]),S=R(1,r[1]),u=e.createVertexArray();e.bindVertexArray(u);{let a=new Float32Array([-.5,-.5,.5,-.5,.5,.5,-.5,.5]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0);let n=new Float32Array([0,1,1,1,1,0,0,0]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.enableVertexAttribArray(E),e.vertexAttribPointer(E,2,e.FLOAT,!1,0,0);let i=new Uint16Array([0,1,3,3,1,2]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}let T=e.createVertexArray();e.bindVertexArray(T);{let a=new Float32Array([-.9,-.7,-.7,-.9,-.5,-.7,-.7,-.5]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0);let n=new Float32Array([0,1,1,1,1,0,0,0]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.enableVertexAttribArray(E),e.vertexAttribPointer(E,2,e.FLOAT,!1,0,0);let i=new Uint16Array([0,1,2,2,3,0]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}let f=e.createVertexArray();e.bindVertexArray(f);{let a=new Float32Array([.5,.8,.6,.6,.7,.8,.8,.6,.9,.8,1,.6]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0);let n=new Float32Array([0,0,1,0,1,1,1,0,0,1]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.enableVertexAttribArray(E),e.vertexAttribPointer(E,2,e.FLOAT,!1,0,0);let i=new Uint16Array([0,2,1,3,4,5]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}let D=+new Date;(function a(){let n=(+new Date-D)/1e3;d(e.canvas)&&e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(c),e.uniform1i(F,0),e.uniform1i(v,1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,L),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,S),e.uniform1f(U,n),e.uniform2fv(B,[e.canvas.width,e.canvas.height]),e.bindVertexArray(u),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindVertexArray(T),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindVertexArray(f),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.bindVertexArray(null),requestAnimationFrame(a)})()})();
//# sourceMappingURL=main.js.map
