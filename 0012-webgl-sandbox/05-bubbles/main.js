var f=(t,a,e)=>{let o=t.createShader(a);if(!o)throw new Error("createShader failed");if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error(`could not compile shader: ${t.getShaderInfoLog(o)||""}`);return o},v=(t,a,e)=>{let o=t.createProgram();if(!o)throw new Error("createProgram failed");if(t.attachShader(o,a),t.attachShader(o,e),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error(`program failed to link:${t.getProgramInfoLog(o)||""}`);return o};var R=t=>{let a=t.clientWidth,e=t.clientHeight,o=t.width!==a||t.height!==e;return o&&(t.width=a,t.height=e),o};var T=`#version 300 es
precision highp float;in vec2 v_uv;in float v_depth;uniform vec2 u_resolution;out vec4 outColor;void main(){vec2 ouv=(v_uv-.5);vec2 uv=ouv;float smoothing=.75-sqrt(v_depth*2.5);smoothing=clamp(smoothing,0.,.49);float d=smoothstep(.5,smoothing,length(uv));d-=smoothstep(.5,.0,length(uv))*.25;d-=smoothstep(.5,.4,length(uv))*.2;d*=.5*(1.-v_depth);d=clamp(d,0.,1.);d*=d*2.5;d*=clamp(sqrt(u_resolution.x/u_resolution.y),0.,1.);outColor=vec4(vec3(uv,uv.x+uv.y),d);}`;var b=`#version 300 es
in vec4 a_position;in vec2 a_offset;in vec2 a_uv;uniform float u_time;uniform vec2 u_resolution;out vec2 v_uv;out float v_depth;float hash11(float p){p=fract(p*0.1031);p*=p+33.33;p*=p+p;return fract(p);}void main(){vec4 pos=a_position;float depth=hash11(float(gl_InstanceID)*.01);float size=hash11(float(gl_InstanceID+147)*.053);float speed=hash11(float(gl_InstanceID+254)*.0425);float timeOffset=hash11(float(gl_InstanceID+557)*.0149);pos.xy*=.5+sqrt(depth)*(size*.75+.25)*5.;pos.x*=u_resolution.y/u_resolution.x;pos=pos+vec4(a_offset,0.,0.);float t=u_time*.25*(1.-depth+speed*.5)*.8+100.;float mFactor=t/(1.+sqrt(depth*2.))+timeOffset;float mFx=hash11(floor(mFactor)*.1)*2.-1.;float yOffset=(fract(mFactor)*2.-1.)*2.;pos.y+=yOffset;pos.x+=mFx;pos.x+=sin(yOffset*5.*speed)*.02;gl_Position=pos;v_uv=a_uv;v_depth=depth;}`;(()=>{let t=new window.Stats;t.showPanel(0),document.body.appendChild(t.dom);let a=document.querySelector("#canvas");if(!a)throw new Error("no canvas");let e=a.getContext("webgl2");if(!e)throw new Error("no gl context");e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);let o=f(e,e.VERTEX_SHADER,b),F=f(e,e.FRAGMENT_SHADER,T),n=v(e,o,F),u=e.getAttribLocation(n,"a_position"),d=e.getAttribLocation(n,"a_uv"),i=e.getAttribLocation(n,"a_offset"),x=e.getUniformLocation(n,"u_time"),S=e.getUniformLocation(n,"u_resolution"),s=1e4,h=new Float32Array(s*2),L=new Float32Array(s*1),w=new Float32Array(s*3),y=new Float32Array(s*1),A=[],m=[],_=[],E=[];for(let r=0;r<s;r+=1)_.push(new Float32Array(h.buffer,r*2*4,2)),m.push(new Float32Array(L.buffer,r*1*4,1)),A.push(new Float32Array(w.buffer,r*3*4,3)),E.push(new Float32Array(y.buffer,r*1*4,1));_.forEach(r=>{r[0]=Math.random()*2-1,r[1]=Math.random()*2-1}),m.forEach(r=>{r[0]=Math.random()}),A.forEach(r=>{r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random()}),E.forEach(r=>{r[0]=Math.random()*2+.5});let l=e.createVertexArray();e.bindVertexArray(l);{let c=new Float32Array([-.075,-.075,.075,-.075,.075,.075,-.075,.075]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW),e.enableVertexAttribArray(u),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0);let p=new Float32Array([0,0,1,0,1,1,0,1]);e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,p,e.STATIC_DRAW),e.enableVertexAttribArray(d),e.vertexAttribPointer(d,2,e.FLOAT,!1,0,0);let U=new Uint16Array([0,1,3,3,1,2]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(U),e.STATIC_DRAW);let B=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,B),e.bufferData(e.ARRAY_BUFFER,h,e.STATIC_DRAW),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.vertexAttribDivisor(i,1),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}let D=+new Date;(function r(){t.begin();let c=(+new Date-D)/1e3;R(e.canvas)&&e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(n),e.uniform1f(x,c),e.uniform2fv(S,[e.canvas.width,e.canvas.height]),e.bindVertexArray(l),e.drawElementsInstanced(e.TRIANGLES,6,e.UNSIGNED_SHORT,0,s),e.bindVertexArray(null),t.end(),requestAnimationFrame(r)})()})();
//# sourceMappingURL=main.js.map
