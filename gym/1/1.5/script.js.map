{
  "version": 3,
  "sources": ["../../../../static/root/gym/1/1.5/script.ts"],
  "sourcesContent": ["// @process\nexport {};\n\ntype Author = { id: number; name: string };\n\ntype Comment = {\n  id: number;\n  text: string;\n  author: Author;\n};\n\ntype Post = {\n  id: number;\n  title: string;\n  author: Author;\n  comments: Comment[];\n};\n\nconst posts: Post[] = [\n  {\n    id: 1,\n    title: 'Post 1',\n    author: { id: 101, name: 'John' },\n    comments: [\n      { id: 201, text: 'Great!', author: { id: 102, name: 'Jane' } },\n      { id: 202, text: 'Nice', author: { id: 103, name: 'Bob' } },\n    ],\n  },\n  {\n    id: 2,\n    title: 'Post 2',\n    author: { id: 102, name: 'Jane' },\n    comments: [{ id: 203, text: 'Cool', author: { id: 101, name: 'John' } }],\n  },\n];\n\n// \u041D\u0443\u0436\u043D\u043E \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C:\n// {\n//   posts: { 1: { id: 1, title: 'Post 1', authorId: 101, commentIds: [201, 202] }, ... },\n//   comments: { 201: { id: 201, text: 'Great!', authorId: 102 }, ... },\n//   users: { 101: { id: 101, name: 'John' }, ... }\n// }\n\ntype Normalized = {\n  posts: Record<\n    string,\n    Omit<Post, 'author' | 'comments'> & {\n      authorId: number;\n      commentIds: number[];\n    }\n  >;\n  comments: Record<string, Omit<Comment, 'author'> & { authorId: number }>;\n  users: Record<string, Author>;\n};\nconst normalize = (posts: Post[]): Normalized => {\n  const result: Normalized = {\n    posts: {},\n    comments: {},\n    users: {},\n  };\n\n  posts.forEach((post) => {\n    const { comments, author, ...rest } = post;\n    const commentIds: number[] = [];\n    comments.forEach((comment) => {\n      commentIds.push(comment.id);\n      const { author, ...rest } = comment;\n      result.comments[comment.id] ||= { ...rest, authorId: author.id };\n      result.users[author.id] ||= author;\n    });\n\n    result.users[author.id] ||= author;\n    result.posts[post.id] ||= { ...rest, authorId: author.id, commentIds };\n  });\n\n  return result;\n};\n\nconst result = normalize(posts);\n\nconsole.log(result);\n"],
  "mappings": "AAkBA,IAAMA,EAAgB,CACpB,CACE,GAAI,EACJ,MAAO,SACP,OAAQ,CAAE,GAAI,IAAK,KAAM,MAAO,EAChC,SAAU,CACR,CAAE,GAAI,IAAK,KAAM,SAAU,OAAQ,CAAE,GAAI,IAAK,KAAM,MAAO,CAAE,EAC7D,CAAE,GAAI,IAAK,KAAM,OAAQ,OAAQ,CAAE,GAAI,IAAK,KAAM,KAAM,CAAE,CAC5D,CACF,EACA,CACE,GAAI,EACJ,MAAO,SACP,OAAQ,CAAE,GAAI,IAAK,KAAM,MAAO,EAChC,SAAU,CAAC,CAAE,GAAI,IAAK,KAAM,OAAQ,OAAQ,CAAE,GAAI,IAAK,KAAM,MAAO,CAAE,CAAC,CACzE,CACF,EAoBMC,EAAaD,GAA8B,CAC/C,IAAME,EAAqB,CACzB,MAAO,CAAC,EACR,SAAU,CAAC,EACX,MAAO,CAAC,CACV,EAEA,OAAAF,EAAM,QAASG,GAAS,CA7D1B,IAAAC,EAAAC,EAAAC,EAAAC,EA8DI,GAAM,CAAE,SAAAC,EAAU,OAAAC,KAAWC,CAAK,EAAIP,EAChCQ,EAAuB,CAAC,EAC9BH,EAAS,QAASI,GAAY,CAhElC,IAAAR,EAAAC,EAAAC,EAAAC,EAiEMI,EAAW,KAAKC,EAAQ,EAAE,EAC1B,GAAM,CAAE,OAAAH,KAAWC,CAAK,EAAIE,GAC5BR,EAAAF,EAAO,UAAPG,EAAgBO,EAAQ,MAAxBR,EAAAC,GAAgC,CAAE,GAAGK,EAAM,SAAUD,EAAO,EAAG,IAC/DH,EAAAJ,EAAO,OAAPK,EAAaE,EAAO,MAApBH,EAAAC,GAA4BE,EAC9B,CAAC,GAEDL,EAAAF,EAAO,OAAPG,EAAaI,EAAO,MAApBL,EAAAC,GAA4BI,IAC5BH,EAAAJ,EAAO,OAAPK,EAAaJ,EAAK,MAAlBG,EAAAC,GAA0B,CAAE,GAAGG,EAAM,SAAUD,EAAO,GAAI,WAAAE,CAAW,EACvE,CAAC,EAEMT,CACT,EAEMA,EAASD,EAAUD,CAAK,EAE9B,QAAQ,IAAIE,CAAM",
  "names": ["posts", "normalize", "result", "post", "_a", "_b", "_c", "_d", "comments", "author", "rest", "commentIds", "comment"]
}
