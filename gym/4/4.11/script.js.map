{
  "version": 3,
  "sources": ["../../../../static/root/gym/4/4.11/script.ts"],
  "sourcesContent": ["// @process\nexport {};\n\nclass VirtualScroll {\n  container: HTMLElement;\n  items: any[];\n  itemHeight: number;\n  renderItem: (item: any) => string;\n  itemsBlock: HTMLElement;\n\n  constructor(\n    container: HTMLElement,\n    items: any[],\n    itemHeight: number,\n    renderItem: (item: any) => string,\n  ) {\n    this.container = container;\n    this.items = items;\n    this.itemHeight = itemHeight;\n    this.renderItem = renderItem;\n\n    const itemsBlock = document.createElement('div');\n    this.itemsBlock = itemsBlock;\n    itemsBlock.style.position = 'absolute';\n    itemsBlock.style.width = '100%';\n    itemsBlock.style.willChange = 'transform';\n\n    const inner = document.createElement('div');\n    inner.style.height = `${this.items.length * this.itemHeight}px`;\n    inner.style.position = 'relative';\n    inner.append(itemsBlock);\n\n    this.container.append(inner);\n\n    container.addEventListener('scroll', this.render.bind(this));\n    this.render();\n  }\n\n  // \u0420\u0435\u043D\u0434\u0435\u0440\u0438\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0432\u0438\u0434\u0438\u043C\u044B\u0435 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B + buffer\n  // \u041F\u0440\u0438 \u0441\u043A\u0440\u043E\u043B\u043B\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u044F\u0442\u044C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u044B\u0435 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B\n  // \u0421\u043E\u0437\u0434\u0430\u0442\u044C \"\u0432\u0438\u0440\u0442\u0443\u0430\u043B\u044C\u043D\u0443\u044E\" \u0432\u044B\u0441\u043E\u0442\u0443 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\u0430\n\n  render(): void {\n    const BUFFER = 5;\n\n    let startItems = Math.floor(this.container.scrollTop / this.itemHeight);\n    let endItems =\n      startItems + Math.ceil(this.container.offsetHeight / this.itemHeight);\n\n    startItems = Math.max(0, startItems - BUFFER);\n    endItems = Math.min(endItems + BUFFER, this.items.length);\n\n    this.itemsBlock.style.transform = `translateY(${\n      startItems * this.itemHeight\n    }px)`;\n\n    const htmlItems: string[] = [];\n    for (let i = startItems; i < endItems; i++) {\n      htmlItems.push(this.renderItem(this.items[i]));\n    }\n    this.itemsBlock.innerHTML = htmlItems.join('');\n  }\n}\n\n// items = Array(10000).fill(0).map((_, i) => ({ id: i, name: `Item ${i}` }))\n// \u0414\u043E\u043B\u0436\u043D\u044B \u0431\u044B\u0442\u044C \u0432\u0438\u0434\u043D\u044B \u0442\u043E\u043B\u044C\u043A\u043E ~20 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u043E\u0434\u043D\u043E\u0432\u0440\u0435\u043C\u0435\u043D\u043D\u043E\n\nconst listEl: HTMLElement = document.querySelector('#list')!;\n\nconst items = new Array(1000)\n  .fill(0)\n  .map((_, idx) => ({ id: idx, title: `Row_${idx}` }));\n\nnew VirtualScroll(listEl, items, 40, (item: { id: number; title: string }) => {\n  return `<div style='height: 40px;' class='row'>${item.title}</div>`;\n});\n"],
  "mappings": "AAGA,IAAMA,EAAN,KAAoB,CAOlB,YACEC,EACAC,EACAC,EACAC,EACA,CACA,KAAK,UAAYH,EACjB,KAAK,MAAQC,EACb,KAAK,WAAaC,EAClB,KAAK,WAAaC,EAElB,IAAMC,EAAa,SAAS,cAAc,KAAK,EAC/C,KAAK,WAAaA,EAClBA,EAAW,MAAM,SAAW,WAC5BA,EAAW,MAAM,MAAQ,OACzBA,EAAW,MAAM,WAAa,YAE9B,IAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,MAAM,OAAS,GAAG,KAAK,MAAM,OAAS,KAAK,eACjDA,EAAM,MAAM,SAAW,WACvBA,EAAM,OAAOD,CAAU,EAEvB,KAAK,UAAU,OAAOC,CAAK,EAE3BL,EAAU,iBAAiB,SAAU,KAAK,OAAO,KAAK,IAAI,CAAC,EAC3D,KAAK,OAAO,CACd,CAMA,QAAe,CAGb,IAAIM,EAAa,KAAK,MAAM,KAAK,UAAU,UAAY,KAAK,UAAU,EAClEC,EACFD,EAAa,KAAK,KAAK,KAAK,UAAU,aAAe,KAAK,UAAU,EAEtEA,EAAa,KAAK,IAAI,EAAGA,EAAa,CAAM,EAC5CC,EAAW,KAAK,IAAIA,EAAW,EAAQ,KAAK,MAAM,MAAM,EAExD,KAAK,WAAW,MAAM,UAAY,cAChCD,EAAa,KAAK,gBAGpB,IAAME,EAAsB,CAAC,EAC7B,QAASC,EAAIH,EAAYG,EAAIF,EAAUE,IACrCD,EAAU,KAAK,KAAK,WAAW,KAAK,MAAMC,EAAE,CAAC,EAE/C,KAAK,WAAW,UAAYD,EAAU,KAAK,EAAE,CAC/C,CACF,EAKME,EAAsB,SAAS,cAAc,OAAO,EAEpDT,EAAQ,IAAI,MAAM,GAAI,EACzB,KAAK,CAAC,EACN,IAAI,CAACU,EAAGC,KAAS,CAAE,GAAIA,EAAK,MAAO,OAAOA,GAAM,EAAE,EAErD,IAAIb,EAAcW,EAAQT,EAAO,GAAKY,GAC7B,0CAA0CA,EAAK,aACvD",
  "names": ["VirtualScroll", "container", "items", "itemHeight", "renderItem", "itemsBlock", "inner", "startItems", "endItems", "htmlItems", "i", "listEl", "_", "idx", "item"]
}
