var m=class{constructor(n,s,r,t){this.innerChildNodes=new Map;this.container=n,this.items=s,this.itemHeight=r,this.renderItem=t;let e=document.createElement("div");this.inner=e,e.style.height=`${this.items.length*this.itemHeight}px`,e.style.position="relative",this.container.append(e);let i=null;n.addEventListener("scroll",()=>{i||(i=requestAnimationFrame(()=>{this.render(),i=null}))},{passive:!0}),this.render()}createItemEl(n){let s=this.renderItem(this.items[n]),r=document.createElement("template");r.innerHTML=s.trim();let t=r.content.firstElementChild;return t.style.position="absolute",t.style.width="100%",t.style.transform=`translateY(${n*this.itemHeight}px)`,t}render(){let s=Math.floor(this.container.scrollTop/this.itemHeight),r=s+Math.ceil(this.container.offsetHeight/this.itemHeight);s=Math.max(0,s-5),r=Math.min(r+5,this.items.length),this.innerChildNodes.forEach((e,i)=>{(i<s||i>=r)&&(e.remove(),this.innerChildNodes.delete(i))});let t=document.createDocumentFragment();for(let e=s;e<r;e++)if(!this.innerChildNodes.has(e)){let i=this.createItemEl(e);this.innerChildNodes.set(e,i),t.appendChild(i)}t.hasChildNodes()&&this.inner.appendChild(t)}},h=document.querySelector("#list"),o=new Array(1e3).fill(0).map((l,n)=>({id:n,title:`Row_${n}`}));new m(h,o,40,l=>`<div style='height: 40px;' class='row'>${l.title}</div>`);
//# sourceMappingURL=script.js.map
