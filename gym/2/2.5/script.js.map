{
  "version": 3,
  "sources": ["../../../../static/root/gym/2/2.5/script.ts"],
  "sourcesContent": ["// @process\nexport {};\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F: formatPhone(input: string): string\n// \u0414\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0442\u044C \u043B\u044E\u0431\u043E\u0439 \u0432\u0432\u043E\u0434 \u0438 \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044C \u043E\u0442\u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\n\n// \u041F\u0440\u0438\u043C\u0435\u0440\u044B:\n// '1234567890' \u2192 '+1 (234) 567-8901'\n// '12345' \u2192 '+1 (234) 5'\n// 'abc123def456' \u2192 '+1 (234) 56' (\u0443\u0431\u0440\u0430\u0442\u044C \u043D\u0435\u0447\u0438\u0441\u043B\u043E\u0432\u044B\u0435 \u0441\u0438\u043C\u0432\u043E\u043B\u044B)\n\nfunction formatPhone(input: string): string {\n  // \u0423\u0431\u0438\u0440\u0430\u0435\u043C \u0432\u0441\u0435 \u043D\u0435\u0447\u0438\u0441\u043B\u043E\u0432\u044B\u0435 \u0441\u0438\u043C\u0432\u043E\u043B\u044B\n  const digits = input.replace(/\\D/g, '');\n\n  // \u0424\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u0443\u0435\u043C \u0440\u0435\u0433\u0443\u043B\u044F\u0440\u043A\u043E\u0439 \u0441 \u0433\u0440\u0443\u043F\u043F\u0430\u043C\u0438\n  return digits.replace(\n    /^(\\d{1})(\\d{0,3})(\\d{0,3})(\\d{0,4}).*/,\n    (match, g1, g2, g3, g4) => {\n      let result = '+' + g1;\n      if (g2) result += ' (' + g2;\n      if (g2.length === 3) result += ')';\n      if (g3) result += ' ' + g3;\n      if (g4) result += '-' + g4;\n      return result;\n    },\n  );\n}\n\n// (document.querySelector('input') as HTMLInputElement)?.addEventListener(\n//   'input',\n//   (e: any) => {\n//     e.currentTarget.value = formatPhone(e.currentTarget.value);\n//   },\n// );\n\n(document.querySelector('input') as HTMLInputElement)?.addEventListener(\n  'input',\n  (e: any) => {\n    const input = e.currentTarget;\n    const oldValue = input.value;\n    const oldCursorPos = input.selectionStart || 0;\n\n    // \u0421\u0447\u0438\u0442\u0430\u0435\u043C \u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0446\u0438\u0444\u0440 \u0431\u044B\u043B\u043E \u0434\u043E \u043A\u0443\u0440\u0441\u043E\u0440\u0430\n    const digitsBeforeCursor = oldValue\n      .slice(0, oldCursorPos)\n      .replace(/\\D/g, '').length;\n\n    // \u0424\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u0443\u0435\u043C\n    const newValue = formatPhone(oldValue);\n    input.value = newValue;\n\n    // \u041D\u0430\u0445\u043E\u0434\u0438\u043C \u043D\u043E\u0432\u0443\u044E \u043F\u043E\u0437\u0438\u0446\u0438\u044E \u043A\u0443\u0440\u0441\u043E\u0440\u0430 (\u0433\u0434\u0435 \u0431\u0443\u0434\u0435\u0442 \u0442\u043E \u0436\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0446\u0438\u0444\u0440)\n    let newCursorPos = 0;\n    let digitCount = 0;\n    for (let i = 0; i < newValue.length; i++) {\n      if (/\\d/.test(newValue[i])) {\n        digitCount++;\n        if (digitCount === digitsBeforeCursor) {\n          newCursorPos = i + 1;\n          break;\n        }\n      }\n    }\n\n    // \u0415\u0441\u043B\u0438 \u0432\u0441\u0435 \u0446\u0438\u0444\u0440\u044B \u043F\u0440\u043E\u0448\u043B\u0438, \u0441\u0442\u0430\u0432\u0438\u043C \u0432 \u043A\u043E\u043D\u0435\u0446\n    if (digitCount < digitsBeforeCursor) {\n      newCursorPos = newValue.length;\n    }\n\n    // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u043A\u0443\u0440\u0441\u043E\u0440\n    input.setSelectionRange(newCursorPos, newCursorPos);\n  },\n);\n"],
  "mappings": "AAWA,SAASA,EAAYC,EAAuB,CAK1C,OAHeA,EAAM,QAAQ,MAAO,EAAE,EAGxB,QACZ,wCACA,CAACC,EAAOC,EAAIC,EAAIC,EAAIC,IAAO,CACzB,IAAIC,EAAS,IAAMJ,EACnB,OAAIC,IAAIG,GAAU,KAAOH,GACrBA,EAAG,SAAW,IAAGG,GAAU,KAC3BF,IAAIE,GAAU,IAAMF,GACpBC,IAAIC,GAAU,IAAMD,GACjBC,CACT,CACF,CACF,CA3BA,IAAAC,GAoCCA,EAAA,SAAS,cAAc,OAAO,IAA9B,MAAAA,EAAsD,iBACrD,QACCC,GAAW,CACV,IAAMR,EAAQQ,EAAE,cACVC,EAAWT,EAAM,MACjBU,EAAeV,EAAM,gBAAkB,EAGvCW,EAAqBF,EACxB,MAAM,EAAGC,CAAY,EACrB,QAAQ,MAAO,EAAE,EAAE,OAGhBE,EAAWb,EAAYU,CAAQ,EACrCT,EAAM,MAAQY,EAGd,IAAIC,EAAe,EACfC,EAAa,EACjB,QAASC,EAAI,EAAGA,EAAIH,EAAS,OAAQG,IACnC,GAAI,KAAK,KAAKH,EAASG,EAAE,IACvBD,IACIA,IAAeH,GAAoB,CACrCE,EAAeE,EAAI,EACnB,KACF,CAKAD,EAAaH,IACfE,EAAeD,EAAS,QAI1BZ,EAAM,kBAAkBa,EAAcA,CAAY,CACpD",
  "names": ["formatPhone", "input", "match", "g1", "g2", "g3", "g4", "result", "_a", "e", "oldValue", "oldCursorPos", "digitsBeforeCursor", "newValue", "newCursorPos", "digitCount", "i"]
}
