{
  "version": 3,
  "sources": ["../../../../static/root/gym/2/2.4/script.ts"],
  "sourcesContent": ["// @process\nexport {};\n\nconst debounce = (func, timeout) => {\n  let tid;\n  return function (this: any, ...args) {\n    const context = this;\n    clearTimeout(tid);\n    tid = setTimeout(() => {\n      func.apply(context, args);\n    }, timeout);\n  };\n};\n\n// \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043B\u0430\u0441\u0441 FormAutoSave\nclass FormAutoSave {\n  formEl: HTMLFormElement | null = null;\n  state = {};\n  localStorageKey = 'form';\n\n  constructor(formId: string, saveDelay: number = 1000) {\n    this.formEl = document.getElementById(formId) as HTMLFormElement;\n    this.localStorageKey = `form_${formId}`;\n    if (!this.formEl) {\n      return;\n    }\n\n    const handleChangeInput = debounce((e) => {\n      const name = e.target.name;\n      const value = e.target.value;\n      this.state[name] = value;\n\n      try {\n        const formState = JSON.stringify(this.state);\n        localStorage.setItem(this.localStorageKey, formState);\n        console.log('formStateSaved', formState);\n      } catch {}\n    }, saveDelay);\n\n    // \u041E\u0434\u0438\u043D \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u043D\u0430 \u0432\u0441\u044E \u0444\u043E\u0440\u043C\u0443!\n    this.formEl.addEventListener('input', (e) => {\n      if (e.target instanceof HTMLInputElement) {\n        handleChangeInput(e);\n      }\n    });\n\n    this.formEl.addEventListener('submit', (e) => {\n      e.preventDefault();\n\n      try {\n        localStorage.removeItem(this.localStorageKey);\n        location.reload();\n      } catch {}\n    });\n\n    this.loadState();\n  }\n\n  private loadState() {\n    try {\n      const formState = localStorage.getItem(this.localStorageKey);\n      if (!formState) {\n        return;\n      }\n      this.state = JSON.parse(formState);\n      for (const [name, value] of Object.entries(this.state)) {\n        const inputEl = this.formEl?.querySelector(\n          `input[name=\"${name}\"]`,\n        ) as HTMLInputElement;\n        if (inputEl) {\n          inputEl.value = value as string;\n        }\n      }\n    } catch {}\n  }\n\n  // \u041F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u043B\u044E\u0431\u043E\u0433\u043E \u043F\u043E\u043B\u044F - \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0442\u044C \u0447\u0435\u0440\u0435\u0437 debounce\n  // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\n  // \u041E\u0447\u0438\u0449\u0430\u0442\u044C \u043F\u0440\u0438 \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0439 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435\n}\n\n// \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435:\nconst autoSave = new FormAutoSave('registration-form');\n"],
  "mappings": "AAGA,IAAMA,EAAW,CAACC,EAAMC,IAAY,CAClC,IAAIC,EACJ,OAAO,YAAwBC,EAAM,CACnC,IAAMC,EAAU,KAChB,aAAaF,CAAG,EAChBA,EAAM,WAAW,IAAM,CACrBF,EAAK,MAAMI,EAASD,CAAI,CAC1B,EAAGF,CAAO,CACZ,CACF,EAGMI,EAAN,KAAmB,CAKjB,YAAYC,EAAgBC,EAAoB,IAAM,CAJtD,YAAiC,KACjC,WAAQ,CAAC,EACT,qBAAkB,OAKhB,GAFA,KAAK,OAAS,SAAS,eAAeD,CAAM,EAC5C,KAAK,gBAAkB,QAAQA,IAC3B,CAAC,KAAK,OACR,OAGF,IAAME,EAAoBT,EAAUU,GAAM,CACxC,IAAMC,EAAOD,EAAE,OAAO,KAChBE,EAAQF,EAAE,OAAO,MACvB,KAAK,MAAMC,GAAQC,EAEnB,GAAI,CACF,IAAMC,EAAY,KAAK,UAAU,KAAK,KAAK,EAC3C,aAAa,QAAQ,KAAK,gBAAiBA,CAAS,EACpD,QAAQ,IAAI,iBAAkBA,CAAS,CACzC,OAAQH,EAAN,CAAO,CACX,EAAGF,CAAS,EAGZ,KAAK,OAAO,iBAAiB,QAAUE,GAAM,CACvCA,EAAE,kBAAkB,kBACtBD,EAAkBC,CAAC,CAEvB,CAAC,EAED,KAAK,OAAO,iBAAiB,SAAWA,GAAM,CAC5CA,EAAE,eAAe,EAEjB,GAAI,CACF,aAAa,WAAW,KAAK,eAAe,EAC5C,SAAS,OAAO,CAClB,OAAQA,EAAN,CAAO,CACX,CAAC,EAED,KAAK,UAAU,CACjB,CAEQ,WAAY,CA1DtB,IAAAI,EA2DI,GAAI,CACF,IAAMD,EAAY,aAAa,QAAQ,KAAK,eAAe,EAC3D,GAAI,CAACA,EACH,OAEF,KAAK,MAAQ,KAAK,MAAMA,CAAS,EACjC,OAAW,CAACF,EAAMC,CAAK,IAAK,OAAO,QAAQ,KAAK,KAAK,EAAG,CACtD,IAAMG,GAAUD,EAAA,KAAK,SAAL,YAAAA,EAAa,cAC3B,eAAeH,OAEbI,IACFA,EAAQ,MAAQH,EAEpB,CACF,OAAQ,EAAN,CAAO,CACX,CAKF,EAGMI,EAAW,IAAIV,EAAa,mBAAmB",
  "names": ["debounce", "func", "timeout", "tid", "args", "context", "FormAutoSave", "formId", "saveDelay", "handleChangeInput", "e", "name", "value", "formState", "_a", "inputEl", "autoSave"]
}
